<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>#ZZRH Login</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts -->
   <!-- SweetAlert2 CSS -->
<link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">

<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet" />

  <style>
    @font-face {
      font-family: bloverly;
      src: url('/BLOVERLY.woff2') format('woff2');
    }
    @font-face {
      font-family: Clash-display;
      src: url('/ClashDisplay-Regular.woff') format('woff');
    }
  </style>
</head>
<body class="bg-white flex flex-col md:flex-row min-h-screen">
  <!-- Left Side - Login Form -->
  <div class="w-full md:w-1/2 flex flex-col justify-center px-6 md:px-16 py-12 md:py-0 space-y-6">
    <!-- Logo -->
    <div class="text-[128px] md:text-[128px] tracking-tight font-bloverly">
      #<span class="font-light">ZZRH</span>
    </div>

    <!-- Login Title -->
    <h1 class="text-2xl md:text-3xl font-light font-bloverly mt-8 md:mt-0">Log in</h1>

    <!-- Validation Error Message Container -->
     
    <div id="client-error" class="hidden bg-red-500 text-white px-4 py-2 rounded text-sm"></div>

    <!-- Login Form -->
    <form id="login-form" action="/login" method="post">
      <!-- Email Input -->
      <div class="space-y-2 font-clash">
        <input
          type="email"
          name="email"
          id="email"
          placeholder="Email"
          class="w-full border-b border-gray-400 py-2 focus:outline-none focus:border-black"
          required
        />
      </div>

      <!-- Password Input -->
      <div class="space-y-2 font-clash mt-5">
        <input
          type="password"
          name="password"
          id="password"
          placeholder="Password"
          class="w-full border-b border-gray-400 py-2 focus:outline-none focus:border-black"
          required
        />
      </div>

      <!-- Forgot Password Link -->
      <a href="/email-verification" class="text-xs uppercase tracking-wider hover:underline font-clash mt-5 inline-block">
        Have you forgotten your password?
      </a>

      <!-- Server-side error (EJS) -->
      <% if (error) { %>
        <script>
          Swal.fire({
                toast: true,
                icon: 'error',
                title: '<%=error%>',
                position: 'top-right',
                showConfirmButton: false,
                timer: 3000
            });
        </script>
      <% } %>

      <!-- Login Button -->
      <button type="submit" class="w-full py-3 bg-black text-white font-bloverly font-medium tracking-wider hover:bg-gray-800 transition-colors text-lg md:text-2xl mt-[25px]">
        LOG IN
      </button>
    </form>

    <!-- Register Button -->
    <a href="/register" class="block mt-4">
      <button class="w-full py-3 border border-black text-black font-bloverly font-medium tracking-wider hover:bg-gray-50 transition-colors text-lg md:text-2xl">
        Register
      </button>
    </a>

    <!-- Social Login Section -->
    <div class="pt-8 space-y-4 font-clash mt-6">
      <h2 class="text-sm uppercase tracking-wider">ACCESS WITH</h2>
      <p class="text-xs text-gray-600">
        By logging in with my social login, I agree to link my account in accordance with the
        <a href="#" class="underline">Privacy Policy</a>
      </p>

      <a href="/auth/google" class="block mt-2">
        <button class="w-full py-3 border border-black text-black font-bloverly font-medium tracking-wider hover:bg-gray-50 transition-colors text-lg md:text-2xl">
          Continue with google
        </button>
      </a>

      <button class="w-full py-3 border border-black text-black font-bloverly font-medium tracking-wider hover:bg-gray-50 transition-colors text-lg md:text-2xl">
        Continue with apple
      </button>
    </div>
  </div>

  <!-- Right Side - Image -->
  <div class="w-full md:w-1/2 bg-cover bg-center hidden md:block">
    <img src="/background.jpg" alt="Login background" class="w-full h-full object-cover" />
  </div>

  <style>
    .font-bloverly {
      font-family: bloverly, serif;
    }
    .font-clash {
      font-family: Clash-display, sans-serif;
    }
  </style>

  <!-- Client-side Validation Script -->
  <script>
    document.getElementById('login-form').addEventListener('submit', function (e) {
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value.trim();
      const errorDiv = document.getElementById('client-error');
  
      // Reset
      errorDiv.classList.add('hidden');
      errorDiv.textContent = '';

      let isValid = true;
      let errorMsg = '';

      // Validate email
      if (!email) {
        errorMsg = 'Email is required.';
        isValid = false;
      } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        errorMsg = 'Please enter a valid email address.';
        isValid = false;
      }

      // Validate password
      if (!password) {
        errorMsg = 'Password is required.';
        isValid = false;
      } else if (password.length < 6) {
        errorMsg = 'Password must be at least 6 characters long.';
        isValid = false;
      }

      if (!isValid) {
        e.preventDefault(); // Prevent form submission
        errorDiv.textContent = errorMsg;
        errorDiv.classList.remove('hidden');
        // Auto-hide after 4 seconds
        setTimeout(() => errorDiv.classList.add('hidden'), 4000);
      }
    });
  </script>
</body>
</html>